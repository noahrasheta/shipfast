---
phase: 04-synthesis-and-document-output
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - dc-due-diligence-desktop/agents/client-summary-agent.md
autonomous: true
requirements:
  - SYNTH-04
  - SYNTH-05
  - OUTPUT-04

must_haves:
  truths:
    - "Client Summary agent file exists and reads Executive Summary + research reports from workspace folder"
    - "Client Summary agent produces external-facing report without any internal scoring language (no Tier labels, no High/Medium/Low scores, no GREEN/YELLOW/RED)"
    - "Client Summary agent handles missing domain reports gracefully"
    - "Agent does not reference PLUGIN_DIR, _converted/, MCP tools, or Python dependencies"
  artifacts:
    - path: "dc-due-diligence-desktop/agents/client-summary-agent.md"
      provides: "External-facing client summary agent for Cowork"
      contains: "WORKSPACE_FOLDER"
  key_links:
    - from: "dc-due-diligence-desktop/agents/client-summary-agent.md"
      to: "EXECUTIVE_SUMMARY.md"
      via: "Read tool file access"
      pattern: "EXECUTIVE_SUMMARY"
    - from: "dc-due-diligence-desktop/agents/client-summary-agent.md"
      to: "research/*-report.md"
      via: "Read tool file access"
      pattern: "WORKSPACE_FOLDER.*research"
---

<objective>
Port Client Summary agent from CLI to Cowork desktop plugin with embedded template structure.

Purpose: The Client Summary agent is the final synthesis step (Wave 3b). It reads the Executive Summary and all research reports, then produces an external-facing document for the deal presenter that removes all internal scoring language. The Client Summary template structure must be embedded in the agent file (no external template reads).

Output: Client Summary agent markdown file in dc-due-diligence-desktop/agents/ ready for orchestrator dispatch.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-synthesis-and-document-output/04-RESEARCH.md
@.planning/phases/04-synthesis-and-document-output/04-CONTEXT.md
@dc-due-diligence/agents/client-summary-agent.md
@dc-due-diligence/templates/client-summary-template.md
@dc-due-diligence-desktop/agents/power-agent.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Port Client Summary agent to Cowork with embedded template</name>
  <files>dc-due-diligence-desktop/agents/client-summary-agent.md</files>
  <action>
Port the CLI client-summary-agent.md to the Cowork desktop plugin with the client summary template structure embedded directly in the agent file.

**Reference:** Read dc-due-diligence/agents/client-summary-agent.md as the source implementation.
**Reference:** Read dc-due-diligence/templates/client-summary-template.md for the template structure to embed.
**Pattern reference:** Read dc-due-diligence-desktop/agents/power-agent.md for the established Cowork adaptation pattern.

**Adaptation rules:**

1. **Keep verbatim:**
   - YAML frontmatter (name, description)
   - Workflow phases (Phase 1-4 complete methodology)
   - Content Transformation rules (all 6 transformation rules)
   - Phase 2 transformation logic (removing scoring language, translating tier organization, translating verdict, translating concerns into curiosity-based items, aggregating questions, adding collaborative next steps)
   - Phase 4 Quality Review checks (exclusion check, tone check, specificity check, length check, completeness check)
   - Writing Style section (tone, no AI-isms, voice, formatting rules)
   - Key Reminders (all bullet points)
   - What to Exclude list (scoring labels, tier classifications, confidence percentages, traffic lights, agent names, pipeline references, etc.)
   - What to Include list
   - Handling Missing Information rules

2. **Replace:**
   - `${OPPORTUNITY_FOLDER}` -> `${WORKSPACE_FOLDER}` (all occurrences)
   - `${PLUGIN_DIR}/templates/client-summary-template.md` -> Remove reference; embed template structure directly (see below)

3. **Embed client summary template:** Instead of referencing the external client-summary-template.md file, embed the complete template structure directly in the agent file. Include:
   - Template Structure section (the full markdown template with all sections: Header, Overview, Recommendation, Key Findings with 3 subsections, Items Requiring Attention, Questions, Next Steps, Footer)
   - Writing Style guidelines
   - Relationship to Executive Summary explanation

   Place the embedded template in a clearly marked section: `## Client Summary Template` after the Workflow section. The agent's Phase 1 instructions should reference "the Client Summary Template section below" instead of the external file path.

4. **Remove:**
   - MCP tool references (there should be none)
   - Reference to `_converted/manifest.json`

5. **Add "Your Task" section:**
   ```
   ## Your Task

   **Workspace Folder:** `${WORKSPACE_FOLDER}`
   **Executive Summary Path:** `${WORKSPACE_FOLDER}/EXECUTIVE_SUMMARY.md`
   **Research Reports Path:** `${WORKSPACE_FOLDER}/research/`
   **Output Path:** `${WORKSPACE_FOLDER}/CLIENT_SUMMARY.md`

   1. Read the client summary template embedded in this agent file (Client Summary Template section below)
   2. Read `${WORKSPACE_FOLDER}/EXECUTIVE_SUMMARY.md` as the primary input
   3. Read all available research reports from `${WORKSPACE_FOLDER}/research/` using the Read tool
   4. If the Executive Summary does not exist, report this and stop -- the client summary requires the executive summary as input
   5. Follow the four-phase workflow below
   6. Write your report to `${WORKSPACE_FOLDER}/CLIENT_SUMMARY.md`
   ```

6. **Source document count:** Replace `_converted/manifest.json` reference with: "Check `${WORKSPACE_FOLDER}/_dd_inventory.json` for the total_files field. If this file does not exist, use the phrase 'the provided documents' instead of a specific count."

7. **Do NOT add Document Safety Protocol** -- the Client Summary agent reads research reports and the executive summary, not broker documents.

The resulting file will be moderately sized (~35-40KB) with the embedded template. This is acceptable -- it guarantees the agent always has access to its template structure.
  </action>
  <verify>
grep -c "WORKSPACE_FOLDER" dc-due-diligence-desktop/agents/client-summary-agent.md && grep -c "OPPORTUNITY_FOLDER" dc-due-diligence-desktop/agents/client-summary-agent.md && grep -c "PLUGIN_DIR" dc-due-diligence-desktop/agents/client-summary-agent.md && grep -c "Client Summary Template" dc-due-diligence-desktop/agents/client-summary-agent.md && grep -c "Data Canopy" dc-due-diligence-desktop/agents/client-summary-agent.md && grep -c "Tier 1\|Tier 2\|Tier 3\|HIGH\|MEDIUM\|LOW\|GREEN\|YELLOW\|RED" dc-due-diligence-desktop/agents/client-summary-agent.md
  </verify>
  <done>client-summary-agent.md exists in dc-due-diligence-desktop/agents/ with WORKSPACE_FOLDER paths, zero OPPORTUNITY_FOLDER references, zero PLUGIN_DIR references, embedded client summary template, Data Canopy branding present, and the file contains the exclusion check list to prevent internal scoring language from appearing in output</done>
</task>

</tasks>

<verification>
1. Client Summary agent file exists in dc-due-diligence-desktop/agents/
2. Zero occurrences of OPPORTUNITY_FOLDER in the file
3. Zero occurrences of PLUGIN_DIR in the file
4. Zero occurrences of _converted/manifest.json in the file
5. File contains embedded Client Summary Template section
6. File contains all Content Transformation rules (6 rules)
7. File contains Quality Review checks (exclusion check for scoring terms)
8. File uses ${WORKSPACE_FOLDER} for path references
9. File references EXECUTIVE_SUMMARY.md as primary input
</verification>

<success_criteria>
- Client Summary agent ready for Wave 3b dispatch (reads executive summary + research reports, produces external-facing document)
- Agent correctly transforms internal analysis into external communication (removes all scoring language)
- No external file dependencies (template embedded, no template reads)
- Follows established Cowork adaptation pattern from Phase 3
</success_criteria>

<output>
After completion, create `.planning/phases/04-synthesis-and-document-output/04-02-SUMMARY.md`
</output>
