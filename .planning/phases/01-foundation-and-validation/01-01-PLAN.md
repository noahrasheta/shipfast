---
phase: 01-foundation-and-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - dc-due-diligence-desktop/.claude-plugin/plugin.json
  - dc-due-diligence-desktop/commands/due-diligence.md
  - dc-due-diligence-desktop/skills/due-diligence/SKILL.md
autonomous: true
requirements:
  - INFRA-01

must_haves:
  truths:
    - "Plugin directory structure matches Cowork format (.claude-plugin/plugin.json, commands/, skills/)"
    - "plugin.json contains valid name, version, description, and author fields matching the official schema"
    - "commands/due-diligence.md has YAML frontmatter with description and argument-hint fields"
    - "skills/due-diligence/SKILL.md has YAML frontmatter with name (lowercase, max 64 chars) and description (max 1024 chars, includes trigger phrases)"
  artifacts:
    - path: "dc-due-diligence-desktop/.claude-plugin/plugin.json"
      provides: "Plugin manifest for Cowork recognition"
      contains: "dc-due-diligence-desktop"
    - path: "dc-due-diligence-desktop/commands/due-diligence.md"
      provides: "Slash command entry point for /due-diligence"
      contains: "argument-hint"
    - path: "dc-due-diligence-desktop/skills/due-diligence/SKILL.md"
      provides: "Orchestrator skill with trigger phrases and workflow instructions"
      contains: "due-diligence"
  key_links:
    - from: "dc-due-diligence-desktop/commands/due-diligence.md"
      to: "dc-due-diligence-desktop/skills/due-diligence/SKILL.md"
      via: "Command body references orchestrator skill for workflow instructions"
      pattern: "orchestrat"
---

<objective>
Scaffold the Cowork plugin directory structure for dc-due-diligence-desktop with plugin.json manifest, slash command file, and orchestrator skill stub.

Purpose: Create the correct file structure so Cowork recognizes the plugin on ZIP upload. This is the foundation every subsequent plan builds on.
Output: Three files — plugin.json, commands/due-diligence.md, skills/due-diligence/SKILL.md — forming a valid Cowork plugin skeleton.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-validation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create plugin manifest and directory structure</name>
  <files>dc-due-diligence-desktop/.claude-plugin/plugin.json</files>
  <action>
Create the directory `dc-due-diligence-desktop/.claude-plugin/` at the repo root (sibling to `dc-due-diligence/` and `create-image/`).

Create `plugin.json` with the exact Cowork schema confirmed from the official `anthropics/knowledge-work-plugins` reference:

```json
{
  "name": "dc-due-diligence-desktop",
  "description": "Run 9-domain data center due diligence analysis from Claude Cowork — no terminal required.",
  "version": "0.1.0",
  "author": {
    "name": "Data Canopy"
  }
}
```

This is the same schema as the CLI plugin format (confirmed). Fields: `name` (string, matches directory name), `description` (user-facing in Cowork plugin list), `version` (semver), `author.name` (string).

Also create empty directories:
- `dc-due-diligence-desktop/commands/`
- `dc-due-diligence-desktop/skills/due-diligence/`
- `dc-due-diligence-desktop/agents/` (empty for now — Phase 2+)
  </action>
  <verify>
    <automated>test -f dc-due-diligence-desktop/.claude-plugin/plugin.json && python3 -c "import json; d=json.load(open('dc-due-diligence-desktop/.claude-plugin/plugin.json')); assert d['name']=='dc-due-diligence-desktop'; assert d['version']=='0.1.0'; print('PASS')"</automated>
    <manual>Verify plugin.json is valid JSON with all 4 required fields</manual>
  </verify>
  <done>plugin.json exists at the correct path with name, description, version, and author fields. Directory structure matches Cowork convention (.claude-plugin/, commands/, skills/, agents/).</done>
</task>

<task type="auto">
  <name>Task 2: Create slash command and orchestrator skill stub</name>
  <files>
    dc-due-diligence-desktop/commands/due-diligence.md
    dc-due-diligence-desktop/skills/due-diligence/SKILL.md
  </files>
  <action>
Create `commands/due-diligence.md` — the slash command entry point. Use the exact format confirmed from `anthropics/knowledge-work-plugins/sales/commands/call-summary.md`:

```markdown
---
description: Run full 9-domain data center due diligence analysis on workspace documents
argument-hint: "<data room folder path (optional — defaults to workspace root)>"
---

# Due Diligence Analysis

Analyze the data center opportunity documents in your workspace.

## Instructions

1. Identify the target folder. If a path was provided: use `$ARGUMENTS`. Otherwise, scan the current workspace root for document files.

2. List all document files found (PDF, DOCX, XLSX, PPTX, JPG, PNG) and display the count to the user.

3. If no documents are found, inform the user and stop.

4. [Phase 1 stub] Report that the document inventory is complete. Full domain agent dispatch will be added in Phase 2+.

## Session Resilience

After each major step, write a status checkpoint to the workspace folder so progress survives session interruptions:
- Write `_dd_status.json` with `{"phase": "inventory", "files_found": <count>, "timestamp": "<ISO>"}` after file discovery completes.
```

Create `skills/due-diligence/SKILL.md` — the orchestrator skill with correct frontmatter constraints:

```markdown
---
name: due-diligence
description: "Run due diligence on a data center opportunity. Triggered by '/due-diligence', 'analyze this data center deal', 'run due diligence on these documents', 'evaluate this site', or 'check this data room'."
---

# Due Diligence Orchestrator

You are the orchestrator for a 9-domain data center due diligence analysis. Your job is to coordinate document ingestion, domain agent dispatch, risk assessment, and executive summary generation.

## Phase 1 Capabilities (Current)

- Scan workspace folder for document files
- Display file inventory with counts by type
- Write status checkpoints to disk for session resilience

## Future Capabilities (Phase 2+)

- Document categorization and routing to domain agents
- Parallel or sequential agent dispatch (architecture TBD — see Phase 1 smoke test results)
- Risk assessment synthesis
- Executive summary generation with scoring
- Word/PDF output generation

## Workspace File Discovery

When triggered, use bash to find all document files:

find "${TARGET_FOLDER}" -maxdepth 3 \( -name "*.pdf" -o -name "*.docx" -o -name "*.xlsx" -o -name "*.pptx" -o -name "*.jpg" -o -name "*.jpeg" -o -name "*.png" \) 2>/dev/null | sort

Count and report results to the user in a clear format.

## Session Resilience Protocol

After completing each major step, write a JSON status file to the workspace folder:
- File: `_dd_status.json`
- Purpose: If the Cowork session is interrupted, the next invocation can detect prior progress and skip completed steps.
```

Key constraints verified from research:
- SKILL.md `name` field: max 64 chars, lowercase alphanumeric and hyphens only. "due-diligence" = 14 chars, valid.
- SKILL.md `description` field: max 1024 chars, includes trigger phrases. The description above is ~170 chars, well within limit.
- Command file `description`: shown in Cowork's slash command list.
- Command file `argument-hint`: placeholder shown in input field.
- `$ARGUMENTS` in command body receives user-supplied text.

Put orchestration instructions in BOTH the command file and the SKILL.md. Research Pitfall 5 warns that SKILL.md Level 2 loading may not work in Cowork's sandbox — having instructions in the command body ensures they execute regardless. The SKILL.md serves as a fallback/supplementary source.
  </action>
  <verify>
    <automated>test -f dc-due-diligence-desktop/commands/due-diligence.md && test -f dc-due-diligence-desktop/skills/due-diligence/SKILL.md && grep -q "argument-hint" dc-due-diligence-desktop/commands/due-diligence.md && grep -q "^name: due-diligence" dc-due-diligence-desktop/skills/due-diligence/SKILL.md && echo "PASS"</automated>
    <manual>Verify command file has YAML frontmatter with description and argument-hint. Verify SKILL.md has name and description in frontmatter with trigger phrases.</manual>
  </verify>
  <done>commands/due-diligence.md exists with correct YAML frontmatter (description, argument-hint) and orchestration stub. skills/due-diligence/SKILL.md exists with valid frontmatter (name: lowercase 14 chars, description: includes 5 trigger phrases). Both files contain file discovery instructions and session resilience protocol.</done>
</task>

</tasks>

<verification>
1. Directory structure check: `ls -la dc-due-diligence-desktop/.claude-plugin/ dc-due-diligence-desktop/commands/ dc-due-diligence-desktop/skills/due-diligence/ dc-due-diligence-desktop/agents/`
2. plugin.json validity: Parse as JSON, verify all 4 fields present
3. Command file: Has YAML frontmatter with `description` and `argument-hint`
4. SKILL.md: Has YAML frontmatter with `name` (lowercase, <= 64 chars) and `description` (non-empty, <= 1024 chars)
5. No hardcoded absolute paths in any file
</verification>

<success_criteria>
- dc-due-diligence-desktop/ directory exists at repo root with correct subdirectory structure
- plugin.json is valid JSON with name, description, version, author fields
- commands/due-diligence.md has correct YAML frontmatter format
- skills/due-diligence/SKILL.md has name/description frontmatter within Cowork constraints
- All orchestration instructions are present in command body (not solely in SKILL.md) per Pitfall 5 mitigation
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-validation/01-01-SUMMARY.md`
</output>
