---
phase: 01-foundation-and-validation
plan: 02
type: execute
wave: 2
depends_on:
  - "01-01"
files_modified:
  - dc-due-diligence-desktop/commands/due-diligence.md
  - dc-due-diligence-desktop/skills/due-diligence/SKILL.md
autonomous: false
requirements:
  - INFRA-02
  - INFRA-03
  - PLAT-03

must_haves:
  truths:
    - "User can create a ZIP of the plugin and upload it to Cowork without using a terminal"
    - "After ZIP upload, /due-diligence appears in Cowork's slash command autocomplete"
    - "Running /due-diligence lists document files in the workspace and displays the count"
    - "Status checkpoint file (_dd_status.json) is written to workspace after file discovery"
    - "If session is interrupted after file discovery, the status file persists in the workspace"
  artifacts:
    - path: "dc-due-diligence-desktop.zip"
      provides: "Distributable ZIP archive for Cowork upload"
      contains: ".claude-plugin/plugin.json"
    - path: "dc-due-diligence-desktop/commands/due-diligence.md"
      provides: "Working slash command with file discovery logic"
      contains: "$ARGUMENTS"
    - path: "dc-due-diligence-desktop/skills/due-diligence/SKILL.md"
      provides: "Orchestrator skill with session resilience"
      contains: "_dd_status.json"
  key_links:
    - from: "ZIP archive"
      to: "Cowork plugin interface"
      via: "ZIP upload in Cowork settings"
      pattern: "plugin.json at correct nesting level"
    - from: "commands/due-diligence.md"
      to: "Cowork slash command"
      via: "File naming convention -> /due-diligence activation"
      pattern: "/due-diligence"
    - from: "Orchestrator"
      to: "Workspace folder"
      via: "bash find command for file discovery"
      pattern: "find.*-name.*\\.pdf"
---

<objective>
Package the plugin as ZIP, test installation in Cowork, and validate that the slash command fires, lists workspace files, and writes session resilience checkpoints.

Purpose: Prove the end-to-end install-and-trigger flow works for a non-technical user. This is the "it actually works in Cowork" validation.
Output: Tested ZIP package, confirmed slash command invocation format, working file discovery, session resilience checkpoint.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-validation/01-RESEARCH.md
@.planning/phases/01-foundation-and-validation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build ZIP package and refine slash command with file discovery</name>
  <files>
    dc-due-diligence-desktop/commands/due-diligence.md
    dc-due-diligence-desktop/skills/due-diligence/SKILL.md
  </files>
  <action>
**ZIP Packaging:**

Create the ZIP archive from the repo root:

```bash
cd /path/to/shipfast
zip -r dc-due-diligence-desktop.zip dc-due-diligence-desktop/ \
  --exclude "*.DS_Store" \
  --exclude "*/.git/*"
```

Verify the ZIP structure with `unzip -l dc-due-diligence-desktop.zip` — confirm:
- `.claude-plugin/plugin.json` is at the correct nesting level (NOT double-nested)
- `commands/due-diligence.md` is present
- `skills/due-diligence/SKILL.md` is present
- No extraneous files

Per Pitfall 3: The exact nesting expectation (flat or with top-level directory) is not officially documented. Test BOTH structures if the first upload fails:
- Option A: ZIP contains `dc-due-diligence-desktop/.claude-plugin/plugin.json` (with top-level dir)
- Option B: ZIP contains `.claude-plugin/plugin.json` (flat, no top-level dir)

**Refine file discovery logic in commands/due-diligence.md:**

Update the command body to include robust file discovery that:
1. Accepts `$ARGUMENTS` as the target folder path, or defaults to scanning the workspace root
2. Uses `find` to list all document types (PDF, DOCX, XLSX, PPTX, JPG, JPEG, PNG)
3. Counts files by type and displays a summary table
4. Writes `_dd_status.json` with discovery results (JSON: phase, files_found, file_types breakdown, timestamp)
5. Handles the case where no documents are found (clear message, no error)

**Session resilience in SKILL.md:**

Ensure the orchestrator checks for `_dd_status.json` at the start of each invocation:
- If the file exists and `phase` matches current step, skip to next step
- If the file is stale (>24 hours old), start fresh
- This ensures interrupted sessions can resume
  </action>
  <verify>
    <automated>cd /Users/noahrasheta/Dev/GitHub/shipfast && zip -r dc-due-diligence-desktop.zip dc-due-diligence-desktop/ --exclude "*.DS_Store" && unzip -l dc-due-diligence-desktop.zip | grep -c "plugin.json\|due-diligence.md\|SKILL.md" | xargs -I {} test {} -ge 3 && echo "PASS"</automated>
    <manual>Upload dc-due-diligence-desktop.zip to Cowork and verify plugin appears in installed plugins list</manual>
  </verify>
  <done>ZIP archive created and validated. File discovery logic implemented in command body. Session resilience checkpoint logic implemented in SKILL.md.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Validate plugin install and slash command in Cowork</name>
  <files>dc-due-diligence-desktop.zip</files>
  <action>
Human verification checkpoint. Claude has built the ZIP package and refined the slash command. The user must now test in Cowork.

What was built:
- Complete Cowork plugin package: ZIP archive containing plugin.json manifest, /due-diligence slash command with file discovery, and orchestrator skill with session resilience.

How to verify:
1. Open Claude Cowork (cowork.claude.com or Claude Desktop app)
2. Go to plugin settings / plugin management
3. Upload `dc-due-diligence-desktop.zip`
4. Confirm the plugin appears in the installed plugins list with the correct name and description
5. Start a new conversation
6. Type `/due-diligence` — confirm it appears in autocomplete
7. If `/due-diligence` does not appear, try `/dc-due-diligence-desktop:due-diligence` (per Pitfall 4)
8. Run the slash command with a folder containing at least 2-3 test documents (any PDF/DOCX files)
9. Confirm the orchestrator lists the files and displays the count
10. Check that `_dd_status.json` was written to the workspace

Record the following results for Plan 01-03:
- Exact slash command invocation format that worked
- Whether SKILL.md instructions were loaded (check if skill-specific behavior appeared)
- Any errors or unexpected behavior

If ZIP upload fails:
- Try the alternative ZIP structure (flat vs nested — see Task 1 notes)
- Report which structure works

Resume signal: Type "approved" with the invocation format that worked, or describe issues encountered.
  </action>
  <verify>User confirms plugin installed, slash command triggered, and file discovery ran successfully in Cowork</verify>
  <done>Plugin installs via ZIP upload. Slash command fires and lists workspace files. Invocation format documented. _dd_status.json written to workspace.</done>
</task>

</tasks>

<verification>
1. ZIP archive exists and contains the 3 critical files at correct nesting
2. Plugin installs successfully in Cowork
3. Slash command appears in autocomplete and fires
4. File discovery runs and reports document count
5. `_dd_status.json` written to workspace
6. Invocation format documented for use in Plan 01-03
</verification>

<success_criteria>
- ZIP uploads to Cowork without errors
- Plugin appears in Cowork's installed plugins list
- /due-diligence (or the correct invocation format) triggers the orchestrator
- Orchestrator lists workspace files with count by type
- _dd_status.json checkpoint file is written to workspace after file discovery
- The exact working invocation format is recorded for Plan 01-03
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-validation/01-02-SUMMARY.md`
</output>
